<html></html>
<head>
    <title>Rainbows, fractals, and crumpled paper: H&ouml;lder continuity</title>
    <link rel="stylesheet" href="../../style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>
<body>
    <h2><a href="/">Adam Scherlis</a></h2>
    <h1>Rainbows, fractals, and crumpled paper: H&ouml;lder continuity</h1>
    <em>2025-11-03</em>
<p>One of my favorite website is <a href="https://allrgb.com/">allRGB</a>. It's a collection of images which each contain every 24-bit RGB color exactly once. Most of them (though not all) are square 4096-by-4096 images. (In general, we can imagine doing this with <script type="math/tex">n^2</script>-level color for any <script type="math/tex">n</script>, producing <script type="math/tex">n^3\times n^3</script> images; allRGB is the case <script type="math/tex">n=16</script>.)</p>
<p>People take that prompt in a ton of different directions; many of the images use clever dithering tricks to simulate a smaller color palette, others arrange their pixels into tiny regions of similar color, etc. But I think my favorites are the ones that attempt to arrange colors as <em>smoothly</em> as possible, like <a href="https://allrgb.com/order-from-chaos">Order from Chaos</a> or <a href="https://allrgb.com/smooth">Smooth</a>.</p>
<p>(Many of the images look smoother than they are, because of small-scale dithering or stripes or similar -- you have to zoom in to see the actual grain.)</p>
<p>How smooth can these images get? To be more precise: what's the smallest <script type="math/tex">C</script> such that there exists a bijection <script type="math/tex">f: [n^3]^2 \to [n^2]^3</script> for which <script type="math/tex">|f(x)-f(y)| \le C</script> for all <script type="math/tex">x,y</script> such that <script type="math/tex">|x-y|=1</script>?</p>
<p>(Or, probably better: what is the smallest <script type="math/tex">C</script> such that <script type="math/tex">|f(x)-f(y)| \le C |x-y| \forall x,y</script>? This is equivalent if we use the Manhattan metric and is the discrete version of Lipschitz continuity.)</p>
<p>We can also think of this problem in a different guise: given a (discretized) square of paper, we want to crumple it up into a (discretized) cube such that it fills the cube uniformly and is stretched out as little as possible in the process.</p>
<p>If we use Euclidean distance in both image space and color space, then we can rule out <script type="math/tex">C=1</script> with some casework (which I have misplaced, so you'll have to trust me). The allrgb image called "Smooth" achieves <script type="math/tex">C=2</script> in a way that looks likely to generalize, so the only remaining question is whether <script type="math/tex">C=\sqrt 2</script> is possible.</p>
<p>Of course, this problem also generalizes to maps between <script type="math/tex">a</script>- and <script type="math/tex">b</script>-dimensional space, i.e. <script type="math/tex">[n^a]^b \to [n^b]^a</script>, for any <script type="math/tex">a > b</script>. (We can also ask about <script type="math/tex">a < b</script>, which includes the case of trying to make allRGB images smooth in the inverse sense -- keeping similar colors as close together as possible. It's not too hard to show that in this case we have to accept pretty large discontinuities.)</p>
<p>Starting with the simplest nontrivial case, <script type="math/tex">(a,b) = (2,1)</script>, we are presented with the challenge of trying to smoothly biject a line onto a square. This is extremely easy in the discrete setting we're working in: just weave back and forth in rows, boustrophedon-style.</p>
<p>But it feels like something's missing from this approach -- or even that of "Smooth" -- compared to, say, "Order from Chaos". You can imagine taking <script type="math/tex">n\to\infty</script> and turning the latter into a nice continuous map from <script type="math/tex">[0, 1]^2 \to [0, 1]^3</script> by progressively adding more detail; if you try that with the alternating-rows map, it fails to converge. If you try it with "Smooth", the <script type="math/tex">8\times 8</script> grid of lines turns into an <script type="math/tex">\frac n2 \times \frac n2</script> grid, which also fails to converge.</p>
<p>As it turns out there's a very beautiful solution to this for the <script type="math/tex">(2,1)</script> case, called the <a href="https://en.wikipedia.org/wiki/Hilbert_curve">Hilbert curve</a>. It's an example of a space-filling curve, that is, a continuous, surjective map from the interval to the square. In other words, it's a fractal curve with fractal dimension 2. (It's not injective, and no space-filling curve can be injective, but I think it only fails this mildly; in particular there's a finite number of preimages for each point on the square, unless I'm mistaken.) <a href="https://xkcd.com/195/">xkcd</a> famously used this to map out IP address space graphically.</p>
<p>How continuous are these maps? The obvious generalization of our definition of smoothness above gives Lipschitz continuity, i.e. <script type="math/tex">|f(x)-f(y)| \le C |x-y|</script> for some <script type="math/tex">C</script>; this would mean that our map "stretches out" the interval by a finite amount <script type="math/tex">C</script>. But (exercise for the reader) this is impossible.</p>
<p>On the other hand, continuity alone is pretty weak; we can do better.</p>
<p>The Hilbert curve has the nice property that a interval of length <script type="math/tex">r</script> of the unit interval gets mapped to a reasonably compact region of area <script type="math/tex">r</script> in the square, which has a diameter on the order of <script type="math/tex">\sqrt r</script>. This implies the property  <script type="math/tex">|f(x)-f(y)| \le C |x-y|^{1/2}</script>, which is called H&ouml;lder continuity (with exponent 1/2).</p>
<p>Can we use space-filling curves to construct H&ouml;lder-continuous versions of our allRGB images? Not directly. You can chain together Hilbert-curve maps to go down from 2 dimensions to 1 and then back up to 3, but the <a href="https://allrgb.com/hilbert-curve">gorgeous result</a> is discontinuous everywhere. (You can also do this with <a href="https://allrgb.com/z">a Z-order curve</a>, which has a particularly simple algorithm -- just interleave and deinterleave the bits of your coordinates to get your color components.)</p>
<p>As it turns out, this question <a href="https://mathoverflow.net/questions/204007/best-h%C3%B6lder-exponents-of-surjective-maps-from-the-unit-square-to-the-unit-cube">has been asked</a> before! The accepted answer links to two great papers on the subject. The <a href="https://link.springer.com/article/10.1007/PL00009375">first</a>, by R. Stong, uses a clever fractal construction to solve the problem for <script type="math/tex">\mathbb Z^a \to \mathbb Z^b</script>. The <a href="https://arxiv.org/abs/math/0302308">second</a> shows (very nonconstructively) that this implies a map <script type="math/tex">\mathbb R^a \to \mathbb R^b</script>; I think you can make this much more constructive, though, by taking advantage of the fractal nature of Stong's construction. (In the <script type="math/tex">(3,2)</script> case, we construct a fractal curve with fractal dimension <script type="math/tex">3/2</script> in the plane, then map two of these Lipschitz-continuously to 3D space.)</p>
<p>Unfortunately, as far as I can tell, this construction on <script type="math/tex">\mathbb R^a \to \mathbb R^b</script> does not restrict to a bijection between hypercubes; it zigzags around too much to be able to cut out a contiguous chunk like that. So some version of this problem remains open.</p>

</body>
</html>